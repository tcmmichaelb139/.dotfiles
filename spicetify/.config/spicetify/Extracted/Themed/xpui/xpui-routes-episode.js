"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{99922:(e,t,a)=>{a.d(t,{o:()=>r});var n=a(87577),i=a(49207);function r(){return{version:(0,n.W6)(i.GE)?2:1}}},40771:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(87462),i=a(67294),r=a(67892);const l=({href:e,children:t,...a})=>i.createElement(r.Z,(0,n.Z)({to:e},a),t)},90110:(e,t,a)=>{a.d(t,{q:()=>T,o:()=>x});var n=a(67294),i=a(94184),r=a.n(i),l=a(69518),s=a.n(l),o=a(10986),c=a(59823),d=a(96206),m=a(4236),u=a(83692),p=a(26010),g=a(69010),y=a(80946),E=a(6116),k=a(38209),b=a(40080);const v="l_MW0G9qeeCKlVJwBykT",f="BKsbV2Xl786X9a09XROH",h="HbKLiGoYM4dpuK8L4TMX",N="_APVWqivXc4YqgsnpFkP",C="VmwiDoU6RpqyzK_n7XRO",P="rEx3EYgBzS8SoY7dmC6x",S="z3zia5snl987x676qe5w";let T;!function(e){e[e.sm=24]="sm",e[e.md=32]="md"}(T||(T={}));const I=e=>{const{currentTarget:t,detail:a}=e;a>0&&t&&t.blur()},x=({uri:e,isFollowing:t,canDownload:a,onFollow:i,size:l=T.sm,className:x,onClick:w=(()=>{})})=>{const D={"--size":`${l}px`},{useDownloading:U,useDownloadCapability:A}=(0,n.useContext)(p.I),[M,R]=(0,n.useState)(!1),[L,F]=A(s().isEpisode(e)),[O,B]=(0,n.useState)(!1),{currentAvailability:_,progress:W,beginDownload:z,clearDownload:K}=U(e);((e,t)=>{const a=(0,k.r)(),i=(0,n.useRef)(!1);(0,n.useEffect)((()=>{e===g.V8.DOWNLOADING&&!1===i.current&&(i.current=!0,a.say(d.ag.get("download.downloading",t.totalItems)))}),[a,e,t]);const r=(0,b.D)(e);(0,n.useEffect)((()=>{r===g.V8.DOWNLOADING&&e===g.V8.YES&&(i.current=!1,a.say(d.ag.get("download.complete")))}),[a,r,e])})(_,W);const Z=(0,n.useCallback)((e=>{F===g.v$.DOWNLOADING_NOT_ALLOWED?(B(!0),w(e,g.mc.notAllowed)):(!1===t?(i(),R(!0)):z(),w(e,g.mc.download)),I(e)}),[z,F,t,w,i]),X=(0,n.useCallback)((e=>{K(),I(e),w(e,g.mc.clear)}),[K,w]);(0,n.useEffect)((()=>{!0===M&&!0===t&&(z(),R(!1))}),[t,M,z]);const V=(0,m.k)(),H="boolean"==typeof a?a:V,$=_===g.V8.YES;return L===g.PQ.NO_DOWNLOAD_CAPABILITY?null:H||$?F===g.v$.DOWNLOADING_NOT_ALLOWED?n.createElement("div",{className:f},n.createElement(u.w,{label:d.ag.get("download.download")},n.createElement("button",{className:r()(h,x),role:"switch",onClick:Z,"aria-label":d.ag.get("download.download"),"aria-checked":!1},n.createElement(o.D,{iconSize:l}))),O&&n.createElement("div",{className:S},n.createElement(y.E,{withTopLeftPointer:!0,horizontal:!0,onClose:()=>{B(!1)}},d.ag.get("download.upsell")))):$?n.createElement(u.w,{label:d.ag.get("download.remove")},n.createElement("button",{className:r()(h,x,N),role:"switch",onClick:X,"aria-label":d.ag.get("download.remove"),"aria-checked":!0},n.createElement(c.E,{iconSize:l}))):_===g.V8.NO?n.createElement(u.w,{label:d.ag.get("download.download")},n.createElement("button",{className:r()(h,x),role:"switch",onClick:Z,"aria-label":d.ag.get("download.download"),"aria-checked":!1},n.createElement(o.D,{iconSize:l}))):n.createElement("div",{className:r()(C,x),role:"switch","aria-checked":!0},n.createElement(u.w,{label:d.ag.get("download.cancel")},n.createElement("button",{style:D,className:r()(h,v,x),onClick:X,"aria-label":d.ag.get("download.cancel")})),n.createElement("span",{style:D,className:r()(P,v)},n.createElement(E.e,{"aria-valuetext":d.ag.get("progress.downloading-tracks"),percentage:W.percentage,size:l}))):null}},37483:(e,t,a)=>{a.d(t,{p:()=>d,q:()=>o.q});var n=a(67294),i=a(28216),r=a(4383),l=a(8475),s=a(56802),o=a(90110);const c=n.memo((function({uri:e,size:t=o.q.md,className:a,onClick:c}){const[d,m]=(0,r.Z)(e),u=(0,i.I0)(),p=(0,s.o)(),g=(0,n.useCallback)((()=>{p({targetUri:e,intent:d?"remove-from-library":"add-to-library",type:"click"}),m(!d),u(d?(0,l.SS)():(0,l.kK)())}),[p,e,d,m,u]);return n.createElement(o.o,{className:a,isFollowing:d,onFollow:g,onClick:c,uri:e,size:t})})),d=n.memo((function(e){return n.createElement(c,e)}))},22578:(e,t,a)=>{a.d(t,{$:()=>u});var n=a(67294),i=a(64593),r=a(96206),l=a(69691),s=a(8341),o=a(89952),c=a(51615),d=a(24183);function m(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const u=({children:e,usePlayingItem:t})=>{let a=m(e);(e=>{const{mainLandmarkRef:t}=(0,d.Oh)(),a=(0,c.k6)(),i=a.location?.state?.preventMoveFocus,r=(0,n.useRef)(a.length<2);r.current=a.length<2,(0,n.useEffect)((()=>{const a=t.current;!i&&!r.current&&a&&e&&(a.setAttribute("aria-label",e),a.focus())}),[e,t,i])})(e);const{isPlaying:u}=(0,l.IK)(),p=(0,s.Y)((e=>e?.item));return p&&(u||t)&&((0,o.G_)(p)?a=[p.name,p.artists.map((e=>e.name)).join(r.ag.getSeparator())].join(" • "):(0,o.iw)(p)?a=[p.name,p.show.name].join(" • "):(0,o.k6)(p)&&(a=m(r.ag.get("ad-formats.advertisement")))),n.createElement(i.q,{defaultTitle:"Spotify",defer:!1},n.createElement("title",null,a))}},56775:(e,t,a)=>{a.r(t),a.d(t,{default:()=>na});var n=a(67294),i=a(28216),r=a(51615),l=a(69518),s=a.n(l),o=a(87577),c=a(97348),d=a(96206),m=a(70369),u=a(1663),p=a(24209),g=a(84629),y=a(95661),E=a(22345),k=a(42273),b=a(59482),v=a(72907),f=a(67892),h=a(43914),N=a(95806),C=a(85592);const P="activation-trigger-mme",S=({episodeUri:e,showUri:t,isLocked:a,isPlaying:r,isPlayDisabled:l,playButtonPlayLabel:o,playButtonPauseLabel:c,onClick:d})=>{const m=(0,i.v9)((e=>e.platform?.isBrowser)),u=n.createElement(N.l,{showUri:t,enabled:a,renderInline:!1},n.createElement(C.fh,{size:"lg",onClick:d,isPlaying:r,disabled:l,locked:a,ariaPlayLabel:o,ariaPauseLabel:c}));return m?n.createElement(h.D,{id:P,targetURI:s().from(e),fadeOut:!0},u):u};var T=a(30947),I=a(32626),x=a(18261),w=a(57978),D=a(43620),U=a(84242),A=a(8341),M=a(5944),R=a(7073),L=a(92408),F=a(84788),O=a(60410),B=a(40771),_=a(31610);const W="UVWRbDQd2DM0ShkvMq54",z="Eoy1M3AAKeAUI9cNWsuq",K="rmgkmccGmTBvrw7gXMyS",Z="JKIiOrx9EhZCkyBsu7YI";function X(e){return e?.replace(/T.*/,"")||""}function V(e){const t=s().from(e);return`/show/${s().hexToId(t?.id||"")}`}const H=n.memo((function({chapter:e}){const{name:t,uri:a,playedState:r,contentRating:l,duration:s,releaseDate:o,playability:c}=e,m=e.book,u=e.coverArt.length?e.coverArt:m.coverArt||[],h=u[0]?.url,N=(0,D.Z)(h||null),C=(0,i.I0)(),[P,H]=(0,n.useState)(r.state===R.sY.Completed),{triggerPlay:$,togglePlay:q,isPlaying:Y,isActive:J}=(0,U.n)({uri:a},{featureIdentifier:"episode"}),G=(0,A.Y)((e=>(0,M.k)(e)??void 0)),Q=(0,O.S)(e),{badges:j}=(0,F.r)({contentRating:l?.label}),ee=(0,n.useCallback)((e=>{!c.playable&&j.nineteen&&(e.stopPropagation(),C((0,g.RM)(a||"")))}),[a,c.playable,j.nineteen,C]),te=(0,n.useCallback)((e=>{Q||(J?q():$({seekTo:e}))}),[Q,J,q,$]);(0,n.useEffect)((()=>{const e=new URLSearchParams(location.search);if(e.has("t")){const t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=s.milliseconds&&te(a)}}),[s,te]);const ae=!Q&&!c.playable,ne=m.uri,ie=m.name,re=d.ag.get("tracklist.a11y.play",t,ie),le=d.ag.get("tracklist.a11y.pause",t,ie);return n.createElement("section",{"data-testid":"chapter",className:W},n.createElement(k.gF,{backgroundColor:N},n.createElement(b.W,null,n.createElement(v.i,{text:t})),n.createElement("div",{className:K},n.createElement(x._,{menu:n.createElement(E.r,{uri:a,isPlayed:P,onMarkAsPlayed:H,contextUri:a})},n.createElement(k.Oe,{loading:"eager",name:t,images:u,placeholderType:"episode",shape:k.Kc.ROUNDED_CORNERS}))),n.createElement(k.sP,null,n.createElement(k.dy,{small:!0,uppercase:!0},d.ag.get("web-player.audiobooks.chapter")),n.createElement(x._,{menu:n.createElement(E.r,{uri:a,isPlayed:P,onMarkAsPlayed:H,contextUri:a})},n.createElement(k.xd,{dragUri:a,dragLabel:t},n.createElement("span",{"data-testid":"chapterTitle"},t))),n.createElement(x._,{menu:n.createElement(E.r,{uri:a,isPlayed:P,onMarkAsPlayed:H,contextUri:a})},n.createElement(f.Z,{to:V(ne)},n.createElement(k.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"bookTitle"},ie)))))),n.createElement(T.o,{backgroundColor:N},n.createElement(T.F,null,j.nineteen&&n.createElement(w.X,{className:z,size:16}),n.createElement(L.E,{size:L.$.LARGE,fullyPlayed:P,durationMs:s.milliseconds,releaseDate:X(o?.isoString),resumePositionMs:r.playPositionMilliseconds,isPlaying:Y,position:J&&G||void 0})),n.createElement(T.F,null,n.createElement("div",{onClick:ee},n.createElement(S,{episodeUri:a,showUri:ne,isLocked:Q,onClick:()=>{te(r.playPositionMilliseconds)},isPlaying:Y,isPlayDisabled:ae,playButtonPlayLabel:re,playButtonPauseLabel:le})),!Q&&n.createElement(_.o,{uri:a,bookUri:ne}),n.createElement(I.yj,{menu:n.createElement(E.r,{uri:a,isPlayed:P,onMarkAsPlayed:H,contextUri:a})},n.createElement(y.z,{label:d.ag.get("more.label.context",t)})))),n.createElement("div",{className:"contentSpacing"},n.createElement(p.P,{buttonSize:"sm",href:ne,component:B.Z,className:Z},"See all chapters")))}));var $=a(87462),q=a(99922),Y=a(74849);const J=(0,n.lazy)((()=>Promise.all([a.e(1814),a.e(8396)]).then(a.bind(a,88396))));function G(e){const t=(0,Y.m)(),a=(0,q.o)();return t?n.createElement(n.Suspense,{fallback:!0},n.createElement(J,(0,$.Z)({reason:"Episode page"},a,e))):null}const Q="dpN5ViPOceUWNB5EQPHN",j="vBcxPq3E2okwgXOkVPEM",ee="HCCBXwdFvq6omWW2hR0N",te="bJOPO5Zo7dpjSVDwEpSw",ae="TXdDDpokVTyJzDEDWHHf",ne="HaSbtEVJnxBsaJ5SRi0M",ie="YldGldlfaI9myEGXQf9g",re="qJHVIpJn1vLPWsAKfTEZ",le="wSIzjkVlr0Zdy7di2vRm",se="hYS_K1NATGyWt6tCSRqQ",oe="hVVaM4pF9arpQ8Nvn2a1",ce="zf0Eac1LugsHUacz74Zf",de="TnNaqxbaI0hzhBQZ7wE0",me="zSw1lG1TNe_xm6KTqtCv",ue="MlEQDkXnjdKKJueJ9kkB",pe="jg0xlyD1yjh0DPNG6eOg",ge="QiHXpFb4dLZNOFe5gpp3";var ye=a(28760),Ee=a(20238),ke=a(54444),be=a(99450),ve=a(49207);const fe=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,o.W6)(ve.Xd)?n.createElement("div",{className:ie},n.createElement("div",{className:re},n.createElement(ye.Dy,{variant:"balladBold",semanticColor:"textBase"},e),n.createElement(ye.Dy,{semanticColor:"textBase"},t)),n.createElement(be.D,{buttonSize:"sm",colorSet:"invertedLight",href:s().from(i).toURLPath(!0),component:B.Z},a)):null,he=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:r,onExpanded:l,onTimeStampClick:s,playability:o,showHeader:c=!0,spec:m})=>{const u=(0,ke.$P)(),p=(i||t)&&c,g=(0,n.useCallback)((e=>{const t=m.readMoreButtonFactory();u.logInteraction(e?t.hitUiReveal():t.hitUiHide()),l?.()}),[m,u,l]);return n.createElement(n.Fragment,null,p&&n.createElement(ye.Dy,{as:"h2",variant:"canon",semanticColor:"textBase",className:ee},d.ag.get("episode.description-title")),t&&n.createElement(fe,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&n.createElement(Ee.o,{className:j,onTimeStampClick:s,maxLines:4,onExpanded:g,content:(a||"").trim(),htmlContent:e&&r?r:void 0,LinkComponent:f.Z,enableTimestamps:o.playable}))};var Ne,Ce=a(94184),Pe=a.n(Ce),Se=a(70131),Te=a(29325),Ie=a(77991),xe=a(3822),we=a(13406),De=a(32648);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(Ne||(Ne={}));const Ue=n.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:a,spec:i}){const r=(0,ke.$P)(),[l,s]=(0,n.useState)(Ne.DESCRIPTION),{scrollNodeRef:o}=n.useContext(De.VX),{ref:c,inView:m}=(0,Se.YD)({threshold:[1],root:o.current,rootMargin:`-${we.K1+1}px 100000px 0px 100000px`}),u=(0,n.useRef)(null),p=(0,n.useCallback)((e=>{u.current=e,c(e)}),[c]);return(0,n.useEffect)((()=>{const e=u.current?.parentElement?.offsetTop,t=o?.current;if(!e||!t)return;const a=e-we.K1;t.scrollTop>a&&t.scrollTo({top:a})}),[o,l]),n.createElement(Te.l,{list:n.createElement(Ie.F,{className:Pe()(ue,{[pe]:!m}),ref:p},n.createElement(xe.c,{label:d.ag.get("web-player.episode.description"),sentenceCase:!0,active:l===Ne.DESCRIPTION,onClick:()=>{const e=i.tabsFactory().descriptionTabButtonFactory().hitUiReveal();r.logInteraction(e),s(Ne.DESCRIPTION)},className:Pe()(ge,{[le]:l===Ne.DESCRIPTION})}),n.createElement(xe.c,{label:d.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:l===Ne.TRANSCRIPT,onClick:()=>{const e=i.tabsFactory().transcriptTabButtonFactory().hitUiReveal();r.logInteraction(e),s(Ne.TRANSCRIPT)},className:Pe()(ge,{[le]:l===Ne.TRANSCRIPT})}))},null===e||l===Ne.DESCRIPTION?t:a)}));var Ae=a(49104);const Me=n.memo((function({transcriptSections:e,onTimeStampClick:t,episodeUri:a}){return n.createElement(n.Fragment,null,n.createElement("div",{className:oe},n.createElement(ye.Dy,{variant:"viola",semanticColor:"textBase"},d.ag.get("web-player.episode.transcript.disclaimer"))),e.map(((e,i)=>{const r=`transcript-section-${i}`;return n.createElement("div",{className:se,key:r},n.createElement("button",{className:ce,onClick:()=>{t(e.startMs,r)}},n.createElement(h.D,{id:r,targetURI:s().from(a),fadeOut:!0},n.createElement(ye.Dy,{variant:"finaleBold",semanticColor:"textSubdued",className:de},(0,Ae.m)(e.startMs)))),e.content.map(((e,t)=>n.createElement(ye.Dy,{variant:"viola",semanticColor:"textBase",className:me,key:`transcript-text-${t}`,dir:"auto"},e))))})))}));var Re=a(16061);const Le="axX_dOb7KXxh2BhADfuQ",Fe="DIz7crU76YDtXXLx34nF",Oe="R2a58pDnuIWBldpbVPRr",Be=n.memo((function({title:e,episodes:t,className:a}){return n.createElement("div",{className:Pe()(Le,a)},n.createElement(ye.Dy,{as:"h2",variant:"canon",className:Fe},e),n.createElement("div",{className:Oe},t.map((e=>n.createElement(Re.B,(0,$.Z)({key:e.uri},e))))))}));var _e=a(98984);const We={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getRecommendedEpisodes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episode"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recommendedEpisodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episode"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"podcast"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]},ze=({uri:e,limit:t})=>{const{data:a}=(i={uri:e,limit:t},r={cacheTime:15*_e.y},(0,_e.a)(We,i,r));var i,r;const l=a?.episode?.recommendedEpisodes.items||[];return l?.length>0?n.createElement(Be,{title:d.ag.get("mwp.entity.might.like"),episodes:l.map(((e,t)=>({index:t,id:e.episode.id,uri:e.episode.uri,name:e.episode.name,description:e.episode.description??"",isExplicit:e.episode.contentRating?.label===R.KS.Explicit,releaseDate:e.episode.releaseDate?.isoString,is19PlusOnly:e.episode.contentRating?.label===R.KS.NineteenPlus,durationMilliseconds:e.episode.duration.totalMilliseconds,images:e.episode.coverArt?.sources??[],showImages:e.episode.podcast.coverArt?.sources??[],resume_point:null,sharingInfo:null})))}):null};var Ke=a(74600),Ze=a(28248),Xe=a(54280),Ve=a(38470),He=a(1848),$e=a(86213),qe=a(21509),Ye=a(82760),Je=a(42922),Ge=a(46585);const Qe="OYehkMWcGJRKPkByp46K",je="uc1bXkrZqrCz0CMK4lBb",et="qZeibBbA3SVClzEueYND",tt=({episodeUri:e,index:t,duration:a,start:i,stop:r,name:l,uri:s,artists:o,album:c,playable:m})=>{const{isActive:u,isPlaying:p,onClick:g}=(0,Ge.k)({episodeUri:e,start:i,stop:r}),y=(0,n.useCallback)(((e,t)=>{g(t)}),[g]),{spec:E}=(0,ke.fU)(He.createDesktopTrackListRowEventFactory,{data:{position:t,reason:"",uri:s}});return n.createElement(Je.ZP,{value:"row",index:t},n.createElement(I.xV,{trigger:"right-click",action:"open",menu:n.createElement($e.$,{uri:s})},n.createElement(Ye.c,{uri:s,index:t,ariaRowIndex:t+1,dragMetadata:{name:l,createdBy:o?.[0].name??""},onTriggerPlay:y,isActive:u,isPlayable:m,spec:E},n.createElement(qe.vZ,{ariaColIndex:0},n.createElement(qe.Du,{uri:s,playAriaLabel:d.ag.get("tracklist.a11y.play",l,o?.[0].name),onClick:y,isPlaying:p,isActive:u,spec:E},n.createElement(qe.km,null,n.createElement("img",{className:je,src:c.image,alt:c.name}))),n.createElement(qe.vm,null,n.createElement(qe.Wh,{titleText:l},l),n.createElement(qe.K9,null,n.createElement(qe.T6,{artists:o,spec:E})))),n.createElement(qe.UA,{ariaColIndex:1},n.createElement(qe.BM,{uri:c.uri,name:c.name,spec:E},c.name)),n.createElement(qe.mU,{ariaColIndex:2},n.createElement(qe.qS,{uri:s,spec:E}),n.createElement(qe.A$,{duration:a}),n.createElement(qe.Zv,{spec:E,menu:n.createElement($e.$,{uri:s,artists:o}),label:d.ag.get("more.label.track",l,o?.[0].name)})))))};const at=({uri:e,segmentCount:t})=>{const a=(0,Xe.G)(),i=(0,n.useCallback)((async(t,n)=>{const i=Math.ceil(t/2);try{return function(e,t,a){return e.reduce(((e,n,i)=>((i>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===n.type?e.push(function(e,t,a){return{type:"MUSIC",index:t,uri:a.uri,episodeUri:e,start:a.start,stop:a.stop,duration:a.duration,name:a.track.name,artists:a.track.artists,album:a.track.album,playable:a.track.playable}}(a,i,n)):"TALK"===n.type&&e.push(function(e,t,a){return{type:"TALK",index:t,uri:e,title:a.title,subtitle:a.subtitle,start:a.start,stop:a.stop,duration:a.duration,showUri:a.show.uri,showName:a.show.name}}(a,i,n)),e)),[])}(await a.getSegments(e,i,n),i,e)}catch(e){return[]}}),[a,e]),r=(0,n.useCallback)((t=>{switch(t.type){case"SPACER":return n.createElement("div",{key:t.id,className:et});case"MUSIC":return n.createElement(tt,(0,$.Z)({key:`${e}-${t.index}`},t));case"TALK":return n.createElement(Ke.t,(0,$.Z)({key:`${e}-${t.index}`},t));default:return(0,Ve.U)(t)}}),[e]),l=d.ag.get("music_and_talk.in_this_episode");return n.createElement("div",null,n.createElement(ye.Dy,{as:"h2",variant:"canon",semanticColor:"textBase",className:Qe},l),n.createElement(Ze.Pv,{ariaLabel:l,hasHeaderRow:!0,rowPlaceholder:Ze.hU,columns:[Ze.QD.TITLE,Ze.QD.ALBUM_OR_SHOW,Ze.QD.DURATION],renderRow:r,fetchTracks:i,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"}))};var nt=a(43720),it=a.n(nt),rt=a(62100),lt=a.n(rt);let st;function ot(e){switch(e){case 0:case"UNKNOWN":return st.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return st.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return st.MUSIC_TRACK;default:return st.UNRECOGNIZED}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(st||(st={}));const ct={encode(e,t=lt().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const a of e.sections)dt.encode(a,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const a=e instanceof lt().Reader?e:new(lt().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;a.pos<n;){const e=a.uint32();switch(e>>>3){case 1:i.version=a.string();break;case 2:i.episodeUri=a.string();break;case 3:i.publishedAt=a.string();break;case 4:i.sections.push(dt.decode(a,a.uint32()));break;case 5:i.language=a.string();break;case 6:i.curated=a.bool();break;default:a.skipType(7&e)}}return i},fromJSON:e=>({version:pt(e.version)?String(e.version):"",episodeUri:pt(e.episodeUri)?String(e.episodeUri):"",publishedAt:pt(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>dt.fromJSON(e))):[],language:pt(e.language)?String(e.language):"",curated:!!pt(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?dt.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>dt.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const dt={encode:(e,t=lt().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&mt.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&ut.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&mt.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const a=e instanceof lt().Reader?e:new(lt().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;a.pos<n;){const e=a.uint32();switch(e>>>3){case 1:i.type=a.int32();break;case 2:i.startMs=a.int32();break;case 3:i.plaintextContent=mt.decode(a,a.uint32());break;case 6:i.musicTrack=ut.decode(a,a.uint32());break;case 4:i.title=a.string();break;case 5:i.fallback=mt.decode(a,a.uint32());break;default:a.skipType(7&e)}}return i},fromJSON:e=>({type:pt(e.type)?ot(e.type):0,startMs:pt(e.startMs)?Number(e.startMs):0,plaintextContent:pt(e.plaintextContent)?mt.fromJSON(e.plaintextContent):void 0,musicTrack:pt(e.musicTrack)?ut.fromJSON(e.musicTrack):void 0,title:pt(e.title)?String(e.title):"",fallback:pt(e.fallback)?mt.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case st.UNKNOWN:return"UNKNOWN";case st.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case st.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?mt.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?ut.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?mt.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?mt.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?ut.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?mt.fromPartial(e.fallback):void 0,t}};const mt={encode(e,t=lt().Writer.create()){for(const a of e.plaintext)t.uint32(10).string(a);return t},decode(e,t){const a=e instanceof lt().Reader?e:new(lt().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={plaintext:[]};for(;a.pos<n;){const e=a.uint32();if(e>>>3==1)i.plaintext.push(a.string());else a.skipType(7&e)}return i},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const ut={encode:(e,t=lt().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const a=e instanceof lt().Reader?e:new(lt().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={uri:""};for(;a.pos<n;){const e=a.uint32();if(e>>>3==1)i.uri=a.string();else a.skipType(7&e)}return i},fromJSON:e=>({uri:pt(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function pt(e){return null!=e}function gt(e){return e.type===st.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}lt().util.Long!==it()&&(lt().util.Long=it(),lt().configure());const yt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,hasMusicAndTalkSegements:r,htmlDescription:l,onExpanded:s,onDescriptionTimestampClick:o,onTranscriptTimestampClick:c,playability:m,segmentCount:u,showUrl:g,transcript:y,transcriptEnabled:E,uri:k,spec:b})=>{const v=(0,ke.$P)(),f=(0,n.useMemo)((()=>b.recommendationsFactory()),[b]),h=(0,n.useMemo)((()=>b.descriptionSectionFactory()),[b]),N=(0,n.useMemo)((()=>h.trackListFactory()),[h]),[C,P]=(0,n.useState)(null),S=(0,n.useCallback)((async e=>{const t=await async function(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer();return ct.decode(new Uint8Array(e)).sections.map(gt)}return null}catch(e){return null}}(e);P(t)}),[]);(0,n.useEffect)((()=>{y&&y.length>0&&S(y[0].cdnUrl)}),[S,y]);const T=c=>n.createElement(n.Fragment,null,n.createElement(he,{hasDescription:i,contentInformation:t,onTimeStampClick:o,onExpanded:s,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:l,playability:m,showHeader:c,spec:h}),r&&n.createElement(ke.Nh,{spec:N},n.createElement(at,{segmentCount:u,uri:k})),g&&n.createElement(p.P,{buttonSize:"sm",className:te,href:g,component:B.Z,onClick:()=>{v.logInteraction(h.allEpisodesLinkFactory().hitUiNavigate({destination:g}))}},d.ag.get("episode.see_all_episodes")),n.createElement(G,{uri:k}),n.createElement(ke.Nh,{spec:f},n.createElement(ze,{uri:k,limit:6})));return n.createElement(n.Fragment,null,E&&y&&y?.length>0?n.createElement(Ue,{transcriptSections:C,descriptionContent:T(!1),transcriptContent:n.createElement(Me,{transcriptSections:C||[],onTimeStampClick:c,episodeUri:k}),spec:b}):T(!0))},Et="o6AdXY67I_0xmTg8LBCI",kt="MMZAjWZzcPpNIE06SNuf",bt="Ccgbgvk9PwclKl5rA6Zj",vt="NHVXJRN6IZANogQjMWei",ft="orBUEK6aY0SZVOnrDerw",ht="ym1d5PDeTaJLIK0SspBF",Nt="Hko6tpIRefr4NKiTEemO",Ct="ptUwXq9IK8IQAOE2UiDA",Pt="mpyCCCudeQ3uBmgrSAcA",St=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,o.W6)(ve.Xd)?n.createElement("div",{className:Nt},n.createElement("div",{className:Ct},n.createElement(ye.Dy,{variant:"balladBold",semanticColor:"textBase"},e),n.createElement(ye.Dy,{semanticColor:"textBase"},t)),n.createElement(be.D,{buttonSize:"sm",colorSet:"invertedLight",href:s().from(i).toURLPath(!0),component:B.Z},a)):null,Tt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:r,onExpanded:l,onTimeStampClick:s,playability:o,showHeader:c=!0})=>{const m=(i||t)&&c;return n.createElement(n.Fragment,null,m&&n.createElement(ye.Dy,{as:"h2",variant:"canon",semanticColor:"textBase",className:bt},d.ag.get("episode.description-title")),t&&n.createElement(St,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&n.createElement(Ee.o,{className:kt,onTimeStampClick:s,maxLines:4,onExpanded:l,content:(a||"").trim(),htmlContent:e&&r?r:void 0,LinkComponent:f.Z,enableTimestamps:o.playable}))},It=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:r,onExpanded:l,onTimeStampClick:s,playability:o,showUrl:c,uri:m})=>{return u=!0,n.createElement(n.Fragment,null,n.createElement(Tt,{hasDescription:i,contentInformation:t,onTimeStampClick:s,onExpanded:l,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:o,showHeader:u}),c&&n.createElement(p.P,{buttonSize:"sm",className:vt,href:c,component:B.Z},d.ag.get("episode.see_all_episodes")),n.createElement(G,{uri:m}));var u},xt="activation-trigger-mme",wt=({episodeUri:e,showUri:t,isLocked:a,isPlaying:r,isPlayDisabled:l,playButtonPlayLabel:o,playButtonPauseLabel:c,onClick:d})=>{const m=(0,i.v9)((e=>e.platform?.isBrowser)),u=n.createElement(N.l,{showUri:t,enabled:a,renderInline:!1},n.createElement(C.fh,{size:"lg",onClick:d,isPlaying:r,disabled:l,locked:a,ariaPlayLabel:o,ariaPauseLabel:c}));return m?n.createElement(h.D,{id:xt,targetURI:s().from(e),fadeOut:!0},u):u};var Dt=a(56802),Ut=a(38894),At=a(80219),Mt=a(62975),Rt=a(53646),Lt=a(23716),Ft=a(69691),Ot=a(37483),Bt=a(89744),_t=a(95134),Wt=a(20246),zt=a(87257),Kt=a(52759);const Zt=({podcastShort:e,onPlayEpisode:t,isPlaying:a,isActive:r,isFullyPlayed:l,setIsFullyPlayed:s,backgroundColor:o,isLocked:c})=>{const{uri:m,playedState:u,contentRating:p,playability:E}=e,k=(0,i.I0)(),[b]=(0,Kt.z)(1e4,(e=>e?.item?.uri===m)),v=(0,A.Y)((e=>e?.duration)),{badges:f,hasBadges:h}=(0,F.r)({contentRating:p?.label}),N=(0,n.useCallback)((e=>{!E.playable&&f.nineteen&&(e.stopPropagation(),k((0,g.RM)(m||"")))}),[m,E.playable,f.nineteen,k]),C=!c&&!e.playability.playable,P=d.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),S=d.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),I=e.podcast?.uri;return n.createElement(T.o,{backgroundColor:o},n.createElement("div",{className:Pt},h&&n.createElement(_t.g,null,f.nineteen&&n.createElement(w.X,{className:ft,size:16}),f.explicit?n.createElement(zt.N,null):null),n.createElement(T.F,null,n.createElement(L.E,{size:L.$.LARGE,fullyPlayed:l,durationMs:r&&v?v:e.duration.milliseconds,releaseDate:$t(e.releaseDate?.isoString),resumePositionMs:u.playPositionMilliseconds,isPlaying:a,position:r&&b||void 0}))),n.createElement(T.F,null,n.createElement("div",{onClick:N},n.createElement(wt,{episodeUri:e.uri,showUri:I,isLocked:c,onClick:()=>{t(u.playPositionMilliseconds,!1)},isPlaying:a,isPlayDisabled:C,playButtonPlayLabel:P,playButtonPauseLabel:S})),!c&&n.createElement(Ot.p,{uri:e.uri,showUri:I}),n.createElement(Wt.y,{menu:n.createElement(Bt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:I,contextUri:e.uri,isPlayed:l,onMarkAsPlayed:s,userCreated:e.userCreated})},n.createElement(y.z,{label:d.ag.get("more.label.context",e.name)}))))};var Xt=a(34325);const Vt=({podcastShort:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i})=>{const{uri:r,name:l,sharingInfo:s,playedState:o,episodeType:c,releaseDate:m,userCreated:u}=e,p=function(e,t,a,i,r){const l=t===R.Wf.Episode;return(0,Xt.G3)(e,i,a,r)?n.createElement(Xt.Fg,{isMusicAndTalk:l}):l?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(r,c||R.Wf.Unknown,o.playPositionMilliseconds,$t(m?.isoString),o.state===R.sY.Completed),g=e.podcast?.uri;return n.createElement(k.gF,{backgroundColor:i},n.createElement(b.W,null,n.createElement(v.i,{text:e.name,dragUri:r,dragLabel:e.name})),n.createElement("div",{className:ht},u?.userUri&&n.createElement(x._,{menu:n.createElement(Bt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:g,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:u})},n.createElement(k.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:k.Kc.ROUNDED_CORNERS}))),n.createElement(k.sP,null,n.createElement(k.dy,{small:!0,uppercase:!0},p),u?.userUri&&n.createElement(x._,{menu:n.createElement(Bt.v,{uri:r,sharingInfo:s,showUri:g,contextUri:r,isPlayed:t,onMarkAsPlayed:a,userCreated:u})},n.createElement(k.xd,{dragUri:r,dragLabel:l},l)),u?.userUri&&n.createElement(x._,{menu:n.createElement(Bt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:g,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:u})},n.createElement(f.Z,{to:u.userUri},n.createElement(k.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"showTitle"},u?.displayName))))))},Ht=({podcastShort:e})=>{const{uri:t,episodeType:a,description:r,htmlDescription:l,podcastSubscription:c,segmentsCount:u,podcast:p,contentInformation:g,playedState:y,coverArt:E}=e,[k,b]=(0,n.useState)(y.state===R.sY.Completed),v=(0,Lt.g)(),f=(0,Dt.o)(),h=(0,o.W6)(ve.Cz),N=(0,o.W6)(ve.Be),C=void 0!==u&&u>0&&N,P=(0,Ut.g)(),{triggerPlay:S,togglePlay:T,isActive:I}=(0,U.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:x,isActive:w}=(0,Ft.$o)(t),D=E[0].url,M=(0,Rt.Zj)(D||null),L=(0,A.Y)((e=>e?.isPaused??void 0)),F=(0,i.v9)((e=>e.platform?.isBrowser)),O=c?.isPaywalled&&!c.isUserSubscribed,B=(0,At.s)(e,p),_=(0,n.useCallback)(((e,n=!0,i)=>{const r=()=>{L?v.resume():v.pause()};if(O)return;let l="play";!x||0!==e&&n||(l="pause"),f({intent:l,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===R.Wf.Episode&&F?Mt.y.set((()=>({triggerId:i||xt,triggerAction:null}))):I&&!n?P?r():T():w?r():P?B({seekTo:e}):S({seekTo:e})}),[O,x,f,t,a,F,w,I,P,L,v,T,B,S]),W=(0,n.useCallback)((()=>{f({intent:"expand-description",type:"click"})}),[f]);(0,n.useEffect)((()=>{const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",n=1e3*parseInt(a,10);n<=e.duration.milliseconds&&_(n)}}),[_,e.duration.milliseconds]);const z=!!r||h&&!!l,K=e.podcast?.uri,Z=s().from(K)?.toURLPath(!0);return n.createElement("section",{"data-testid":"episode",className:Et},n.createElement(m.$,null,d.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})),n.createElement(Vt,{podcastShort:e,isFullyPlayed:k,setIsFullyPlayed:b,backgroundColor:M}),n.createElement(Zt,{podcastShort:e,onPlayEpisode:_,isPlaying:x,isActive:w||I,isFullyPlayed:k,setIsFullyPlayed:b,backgroundColor:M,isLocked:!!O}),n.createElement("div",{className:"contentSpacing"},n.createElement(It,{hasDescription:z,contentInformation:g,onTimeStampClick:_,onExpanded:W,description:e.description,areHTMLDescriptionsEnabled:h,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:C,segmentCount:u,uri:e.uri,showUrl:Z})))};function $t(e){return e?.replace(/T.*/,"")||""}var qt=a(52404),Yt=a(86649),Jt=a(51871),Gt=a(25988),Qt=a(53538),jt=a(11414);const ea=({episode:e,onPlayEpisode:t,isPlaying:a,isActive:r,isFullyPlayed:l,setIsFullyPlayed:s,backgroundColor:o,isLocked:c,spec:m})=>{const{uri:u,playedState:p,contentRating:E,playability:k}=e,b=(0,ke.$P)(),v=(0,i.I0)(),[f]=(0,Kt.z)(1e4,(e=>e?.item?.uri===u)),h=(0,A.Y)((e=>e?.duration)),{badges:N}=(0,F.r)({contentRating:E?.label}),C=(0,n.useCallback)((e=>{!k.playable&&N.nineteen&&(e.stopPropagation(),v((0,g.RM)(u||"")))}),[u,k.playable,N.nineteen,v]),P=(0,n.useCallback)((()=>{const e=m.contextMenuButtonFactory().hitUiReveal();b.logInteraction(e)}),[b,m]),I=(0,n.useCallback)(((e,t)=>{(0,Qt.l7)(t,m.downloadButtonFactory(),b,u)}),[b,m,u]),x=(0,n.useCallback)((e=>{const t=m.saveButtonFactory();b.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[b,m,u]),D=!c&&!e.playability.playable,U=d.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),M=d.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),R=e.podcast?.uri;return n.createElement(T.o,{backgroundColor:o},n.createElement(T.F,null,N.nineteen&&n.createElement(w.X,{className:ae,size:16}),n.createElement(L.E,{size:L.$.LARGE,fullyPlayed:l,durationMs:r&&h?h:e.duration.milliseconds,releaseDate:ia(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:a,position:r&&f||void 0})),n.createElement(T.F,null,n.createElement("div",{onClick:C},n.createElement(S,{episodeUri:e.uri,showUri:R,isLocked:c,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:a,isPlayDisabled:D,playButtonPlayLabel:U,playButtonPauseLabel:M})),!c&&n.createElement(Ot.p,{uri:e.uri,showUri:R,onClick:I}),n.createElement(Jt.w,{uri:e.uri,size:jt.q.md,onClick:x}),n.createElement(Wt.y,{onShow:P,menu:n.createElement(Gt.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:R,contextUri:e.uri,isPlayed:l,onMarkAsPlayed:s})},n.createElement(y.z,{label:d.ag.get("more.label.context",e.name)}))))};const ta=({episode:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i,spec:r})=>{const{uri:l,name:o,sharingInfo:c,playedState:m,episodeType:u,releaseDate:p}=e,g=(0,ke.$P)(),y=function(e,t,a,i,r){const l=t===R.Wf.Episode;return(0,Xt.G3)(e,i,a,r)?n.createElement(Xt.Fg,{isMusicAndTalk:l}):l?d.ag.get("type.showEpisode"):d.ag.get("type.podcastEpisode")}(l,u||R.Wf.Unknown,m.playPositionMilliseconds,ia(p?.isoString),m.state===R.sY.Completed),E=e.podcast?.uri,h=function(e){const t=s().from(e);return`/show/${s().hexToId(t?.id||"")}`}(E),N=(0,n.useCallback)((()=>{g.logInteraction(r.podcastLinkFactory().hitUiNavigate({destination:h}))}),[g,h,r]);return n.createElement(k.gF,{backgroundColor:i},n.createElement(b.W,null,n.createElement(v.i,{text:e.name,dragUri:l,dragLabel:e.name})),n.createElement("div",{className:ne},n.createElement(x._,{menu:n.createElement(Gt.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:E,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(k.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:k.Kc.ROUNDED_CORNERS}))),n.createElement(k.sP,null,n.createElement(k.dy,{small:!0,uppercase:!0},y),n.createElement(x._,{menu:n.createElement(Gt.k,{uri:l,sharingInfo:c,showUri:E,contextUri:l,isPlayed:t,onMarkAsPlayed:a})},n.createElement(k.xd,{dragUri:l,dragLabel:o},n.createElement("span",{"data-testid":"episodeTitle"},o))),n.createElement(x._,{menu:n.createElement(Gt.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:E,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(f.Z,{to:h,onClick:N},n.createElement(k.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"showTitle"},e.podcast?.name))))))},aa=({episode:e})=>{const{uri:t,episodeType:a,description:r,htmlDescription:l,podcastSubscription:u,segmentsCount:p,podcast:g,contentInformation:y,playedState:E,coverArt:k}=e,{spec:b,logger:v}=(0,ke.fU)(c.createDesktopEpisodeEventFactory,{data:{uri:t}}),f=(0,n.useMemo)((()=>b.headerFactory()),[b]),h=(0,n.useMemo)((()=>b.actionBarFactory()),[b]),[N,C]=(0,n.useState)(E.state===R.sY.Completed),S=(0,Lt.g)(),T=(0,Dt.o)(),I=(0,o.W6)(ve.Cz),x=(0,o.W6)(ve.Be),w=void 0!==p&&p>0&&x,D=(0,o.W6)(ve.WE,{loadingValue:!1}),M=(0,Ut.g)(),{triggerPlay:L,togglePlay:F,isActive:O}=(0,U.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:B,isActive:_}=(0,Ft.$o)(t),W=k[0].url,z=(0,Rt.Zj)(W||null),K=(0,A.Y)((e=>e?.isPaused??void 0)),Z=(0,i.v9)((e=>e.platform?.isBrowser)),X=u.isPaywalled&&!u.isUserSubscribed,V=_||O,H=(0,At.s)(e,g),$=(0,n.useCallback)(((e,n,i,r)=>{const l=()=>{K?(r?.("resume"),S.resume()):(r?.("pause"),S.pause())};if(X)return;let s="play";if(!B||0!==e&&n||(s="pause"),T({intent:s,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===R.Wf.Episode&&Z)Mt.y.set((()=>({triggerId:i||P,triggerAction:null})));else if(O&&!n)M?l():F({loggingParams:r?.()});else if(_&&!n)l();else{const t=r?.("play");M?H({seekTo:e,loggingParams:t}):L({seekTo:e,loggingParams:t})}}),[X,B,T,t,a,Z,_,O,M,K,S,F,H,L]),q=(0,n.useCallback)((e=>{$(e,!1,void 0,(e=>{const a=b.actionBarFactory().playButtonFactory();let n;return n="pause"===e||B?a.hitPause({itemToBePaused:t}):"resume"===e||V?a.hitResume({itemToBeResumed:t}):a.hitPlay({itemToBePlayed:t}),v.logInteraction(n)}))}),[$,V,B,v,b,t]),Y=(0,n.useCallback)((e=>{$(e,!0,void 0,(()=>v.logInteraction(b.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[$,v,b,t]),J=(0,n.useCallback)(((e,a)=>{$(e,!0,a,(()=>v.logInteraction(b.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[$,v,b,t]),G=(0,n.useCallback)((()=>{T({intent:"expand-description",type:"click"})}),[T]);(0,n.useEffect)((()=>{if(e){const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",n=1e3*parseInt(a,10);n<=e.duration.milliseconds&&$(n,!0)}}}),[e]);const j=!!r||I&&!!l,ee=e.podcast?.uri,te=s().from(ee)?.toURLPath(!0);return n.createElement("section",{"data-testid":"episode",className:Q},n.createElement(m.$,null,d.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})),n.createElement(ta,{episode:e,isFullyPlayed:N,setIsFullyPlayed:C,backgroundColor:z,spec:f}),n.createElement(ea,{episode:e,onPlayEpisode:q,isPlaying:B,isActive:V,isFullyPlayed:N,setIsFullyPlayed:C,backgroundColor:z,isLocked:X,spec:h}),n.createElement("div",{className:"contentSpacing"},n.createElement(yt,{transcriptEnabled:D,transcript:e.transcript,hasDescription:j,contentInformation:y,onDescriptionTimestampClick:Y,onTranscriptTimestampClick:J,onExpanded:G,description:e.description,areHTMLDescriptionsEnabled:I,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:w,segmentCount:p,uri:e.uri,showUrl:te,spec:b})))},na=n.memo((function(){const{episodeId:e}=(0,r.UO)(),t=s().episodeURI(e).toURI(),a=(0,o.W6)(ve.uB),i=(0,o.W6)(ve.zR),l=(0,qt.I)(t,a);return l?(0,Yt.Ey)(l)?n.createElement(n.Suspense,{fallback:null},n.createElement(H,{chapter:l})):(0,Yt.Qj)(l)&&i?n.createElement(n.Suspense,{fallback:null},n.createElement(Ht,{podcastShort:l})):n.createElement(n.Suspense,{fallback:null},n.createElement(aa,{episode:l})):n.createElement(u.h,{hasError:!1,errorMessage:d.ag.get("error.not_found.title.podcast")})}));function ia(e){return e?.replace(/T.*/,"")||""}},53538:(e,t,a)=>{a.d(t,{aK:()=>l,l7:()=>r,qq:()=>i});var n=a(69010);const i=(e,t)=>{const a=e.contextMenuButtonFactory().hitUiReveal();t.logInteraction(a)},r=(e,t,a,i)=>{let r;e===n.mc.download?r=t.hitDownload({itemToDownload:i}):e===n.mc.clear?r=t.hitRemoveDownload({itemToRemoveFromDownloads:i}):e===n.mc.notAllowed&&(r=t.hitUiReveal?.()),r&&a.logInteraction(r)},l=({isPlaying:e,isActive:t,spec:a,logger:n,uri:i})=>{let r;return r=e?a.hitPause({itemToBePaused:i}):t?a.hitResume({itemToBeResumed:i}):a.hitPlay({itemToBePlayed:i}),n.logInteraction(r)}},40080:(e,t,a)=>{a.d(t,{D:()=>i});var n=a(67294);function i(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},92408:(e,t,a)=>{a.d(t,{E:()=>S,$:()=>P});var n=a(67294),i=a(43315);const r="wIA_5Ypq0rltNPeZQpM4",l="Swi6YtNEFCCVz8l4y75v",s="pklLPOhfigdytL9bPoth",o="sb24Y8kdMZInJ8aI8dXT";class c extends n.PureComponent{static defaultProps={current:0,max:1};render(){const{ariaValueText:e,max:t,current:a}=this.props,i=t&&a?100*Math.min(1,a/t):0,c={transform:`translateX(-${100-i}%)`},d=e||`${Math.round(i)}%`;return n.createElement("div",{className:r,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":d},n.createElement("div",{className:l}),n.createElement("div",{className:s},n.createElement("div",{"data-testid":"progressBarFg",className:o,style:c})))}}const d=c,m="qfYkuLpETFW3axnfMntO",u="jOd7lbjiyc_kvRJaAbeL",p="_q93agegdE655O5zPz6l",g="z7Yl7CIT1AB0y91f_moh",y="iLIlkUcfIq56KncGtX7u",E="nV50yZ6BR_TIuWP3l7b1",k="qLjIx_SzBEpDRA_q7kxQ";var b=a(28760),v=a(26461),f=a(96206),h=a(94184),N=a.n(h),C=a(33985);let P;!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(P||(P={}));const S=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:r,fullyPlayed:l,durationMs:s,size:o=P.SMALL,position:c=t}=e;return n.createElement("div",{className:N()(m,{[u]:o===P.LARGE})},a?n.createElement(b.Dy,{as:"p",variant:"mesto",className:p},(0,i.rL)((0,i.RX)(a))):null,(()=>{if(l&&!r)return n.createElement("div",{className:y},n.createElement(b.Dy,{as:"p",variant:"mesto",className:g},f.ag.get("episode.played")),n.createElement(v.N,{iconSize:16,className:k}));if(c>0||r){const e=Math.ceil(Math.max(s-c,0));return n.createElement("div",{className:y},n.createElement(b.Dy,{as:"p",variant:"mesto",className:g},n.createElement(C.ng,{durationMs:e})))}return n.createElement(b.Dy,{as:"p",variant:"mesto",className:p},n.createElement(C.nL,{durationMs:s}))})(),!l&&c>0||r?n.createElement("div",{className:E},n.createElement(d,{current:c,max:s,isEnabled:!1})):null)}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map