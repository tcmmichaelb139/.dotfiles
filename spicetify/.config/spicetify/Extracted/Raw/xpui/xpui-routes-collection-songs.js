"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7553],{8294:(e,t,a)=>{a.d(t,{p:()=>p});var l=a(67294),r=a(96206),n=a(1838),s=a(35308),o=a(22423),i=a(28248),c=a(78462),u=a(42922),m=a(45342),d=a(49961),g=a(39412);const f=new Set(c.P0),E=new Set([]),p=l.memo((function({nrTracks:e,collectionUri:t,columns:a,uri:p,sortable:y=!0,scrollToUri:b,usePlayContextItem:k,outerDomRef:D}){const h=(0,l.useContext)(m.H),C=(0,l.useRef)(null),[S,P]=(0,l.useState)(e),{filter:w}=(0,l.useContext)(o.fo),T=(0,l.useRef)((()=>{})),[x,A]=(0,l.useState)([]),{sortState:v,setSortState:R}=(0,l.useContext)(c.Gb),_=(0,l.useCallback)((e=>{e===i.QD.ADDED_AT?R({column:i.QD.ADDED_AT,order:v.order===i.kn.ASC?i.kn.DESC:i.kn.ASC}):R((0,n.VK)(e,v))}),[R,v]);(0,l.useEffect)((()=>{C.current&&C.current.update()}),[v,w]),(0,l.useEffect)((()=>{C.current&&""===w&&C.current.scrollToFirstSelected()}),[w,S]),(0,l.useEffect)((()=>{P(e)}),[e]),(0,l.useEffect)((()=>{C.current&&b&&C.current.scrollToItem({uri:b})}),[b]);const L=(0,l.useCallback)((e=>{const t=e.map((e=>e.uri));T.current(),h?.remove(...t)}),[h]),I=(0,l.useCallback)(((e,t)=>{T.current=t,e.length>1?A(e):L(e)}),[L]),U=(0,l.useCallback)((async(e,t)=>{const a=await(h?.getTracks({offset:e,limit:t,uri:p,sort:(0,g.w)(v),filter:w})),l=a?.totalLength,r=a?.items||[];return"number"==typeof l&&l!==S&&P(l),r}),[w,h,S,v,p]),F=(0,l.useCallback)(((e,a)=>{const r=(0,d.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return l.createElement(i.dx,{key:a+e.uri,index:a,contextUri:t,uri:e.uri,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,albumOrShow:e.album,isExplicit:e.isExplicit,isCollaborative:!1,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:e.isLocal,addedBy:[],dateAdded:e.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:r?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:k,allowedDropTypes:[],isDisliked:!1})}),[t,k]);return l.createElement(l.Fragment,null,l.createElement(u.ZP,{value:"liked-songs-tracklist"},l.createElement(i.Pv,{ariaLabel:r.ag.get("sidebar.liked_songs"),key:t,hasHeaderRow:!0,columns:a,sortableColumns:h?.getCapabilities().canSort&&y?f:E,sortState:v,onSort:_,renderRow:F,resolveUri:e=>e.uri,resolveUid:e=>e.uri,onRemove:I,nrTracks:S,fetchTracks:U,limit:50,canFetchAllTracks:h?.getCapabilities().canFetchAllTracks,outerRef:C,outerDomRef:D})),l.createElement(s.h,{title:r.ag.get("remove_from_your_liked_songs"),isOpen:x.length>0,tracks:x,onClose:e=>{e.stopPropagation(),A([])},onRemove:L}))}))},42002:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var l=a(67294),r=a(28216),n=a(51615),s=a(72756),o=a(96206),i=a(90110),c=a(70369),u=a(19565),m=a(61048),d=a(1663),g=a(55120),f=a(2751),E=a(35213),p=a(22423),y=a(28248),b=a(78462),k=a(61412),D=a(69846),h=a(23232),C=a(1169),S=a(4236),P=a(30947),w=a(55911),T=a(53646),x=a(88247),A=a(45342),v=a(84242),R=a(29255),_=a(12498),L=a(25916),I=a(39412),U=a(8294);const F=l.lazy((()=>Promise.all([a.e(1814),a.e(3186),a.e(682)]).then(a.bind(a,23186)))),O=[y.QD.INDEX,y.QD.TITLE,y.QD.ALBUM,y.QD.ADDED_AT,y.QD.DURATION],Q="your_library",M=({metadata:e,canFilter:t,canSort:a})=>{const{uri:r,name:D,totalLength:A}=e,{filterBoxApiRef:R,filterBoxDomRef:L,tracklistDomRef:F,handleKeyDown:M}=(0,C.Q)(),z=(0,S.k)()&&A>0,B=A>0,N=(0,T.Y5)("#5038a0"),{filter:K}=(0,l.useContext)(p.fo),{sortState:q,setSortState:G}=(0,l.useContext)(b.Gb);(0,l.useEffect)((()=>{null===q.column&&G({column:y.QD.ADDED_AT,order:y.kn.DESC})}),[q,G]);const H=(0,n.k6)(),Z="POP"!==H.action?new URLSearchParams(H.location.search).get("uri"):null,{isPlaying:$,togglePlay:X,usePlayContextItem:V}=(0,v.n)((0,x.I)(r,(0,I.w)(q),K),{featureIdentifier:Q,referrerIdentifier:"your_library"}),Y=()=>X();return l.createElement("section",{role:"presentation",className:f.Z.playlist,"data-testid":"playlist-page",onKeyDown:M},l.createElement(c.$,null,o.ag.get("playlist.page-title",D)),l.createElement(h.s,{metadata:e,isPlaying:$,togglePlay:Y,backgroundColor:N}),l.createElement(P.o,{backgroundColor:N},l.createElement(P.F,null,B?l.createElement(g.$,{onClick:Y,isPlaying:$,size:w.qE.lg,uri:r,ariaPauseLabel:o.ag.get("playlist.a11y.pause",D),ariaPlayLabel:o.ag.get("playlist.a11y.play",D)}):null,e.totalLength>0&&l.createElement(_.v,{uri:r,renderEnabled:()=>l.createElement(k.v,{uri:r})}),l.createElement(i.o,{uri:r,canDownload:z,isFollowing:!0,onFollow:()=>{},size:i.q.md}),t&&a&&l.createElement("div",{className:f.Z.searchBoxContainer},l.createElement(l.Suspense,{fallback:null},l.createElement(m.K,{placeholder:o.ag.get("playlist.search_in_playlist"),filterBoxApiRef:R,outerRef:L})),l.createElement(E.l,{columns:b.P0})))),l.createElement("div",{className:"contentSpacing"},A>0?l.createElement(l.Suspense,{fallback:l.createElement(d.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-tracks-failure")})},l.createElement(U.p,{nrTracks:A,columns:O,collectionUri:r,scrollToUri:Z,usePlayContextItem:V,outerDomRef:F})):l.createElement(u.u,{message:o.ag.get("collection.empty-page.songs-subtitle"),title:o.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.songs-cta"),renderInline:!0},l.createElement(s.F,null))))},z=l.memo((function(){const e=(0,L.b)(),t=(0,l.useContext)(A.H).getCapabilities(),a=(0,r.v9)(R.n5),{isEnhanced:n}=(0,D.U)(`spotify:user:${a}:collection`);if(e){const a=l.createElement(b.kz,{uri:e.uri},l.createElement(p.hz,{uri:e.uri},l.createElement(M,{metadata:e,canFilter:t.canFilter&&e.totalLength>0,canSort:t.canSort&&e.totalLength>0})));return l.createElement(_.v,{uri:e.uri,renderEnabled:()=>n?l.createElement(l.Suspense,{fallback:null},l.createElement(b.kz,{uri:e.uri},l.createElement(F,{metadata:{...e,collaborators:{count:1,items:[{isOwner:!0,user:e.owner,tracksAdded:e.totalLength}]}},capabilities:t,featureIdentifier:Q}))):a,renderDisabled:()=>a})}return l.createElement(d.h,{hasError:!1,errorMessage:o.ag.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline})}))},23232:(e,t,a)=>{a.d(t,{s:()=>l.s});var l=a(40786)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map